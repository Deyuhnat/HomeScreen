<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>User</title>
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.4/jquery.min.js"></script>
  <link rel="stylesheet" href="./css/other_user_transaction.css">
</head>
<body>

<button class="viewTableButton" onclick="getTransactionOfOtherUser('buyer')">View table as Buyer</button>
<button class="viewTableButton" onclick="getTransactionOfOtherUser('seller')">View table as Seller</button>

<table id="transaction_table">

</table>

<script>
  var defaultOtherUserID = localStorage.getItem("otherUserID");

  getTransactionOfOtherUser();

  function getTransactionOfOtherUser(role) {
    var link = "http://ec2-52-13-116-128.us-west-2.compute.amazonaws.com:8080/api/transaction"

    $.get(link, function(data, status){
      console.log(data);
      var html = '    <tr>\n' +
              '        <th>ID</th>\n' +
              '        <th>UID</th>\n' +
              '        <th>SID</th>\n' +
              '        <th>Name</th>\n' +
              '        <th>Status</th>\n' +
              '        <th></th>\n' +
              '    </tr>';

      var tableDetail = '';

      for (var i = 0; i< data.length; i++) {
        tableDetail = '    <tr>\n' +
                '        <td>' + data[i].id + '</td>\n' +
                '        <td>' + data[i].uid + '</td>\n' +
                '        <td>' + data[i].sid + '</td>\n' +
                '        <td>' + data[i].name + '</td>\n' +
                '        <td>' + data[i].status + '</td>\n' +
                '    </tr>';

        if (role == 'buyer' && data[i].uid != defaultOtherUserID) {
          continue;
        } else if (role == 'seller' && data[i].sid != defaultOtherUserID) {
          continue;
        }
        html = html + tableDetail;
      }
      document.getElementById("transaction_table").innerHTML = html;
    });
  }
</script>
</body>
</html>